# PyWebService

Небольшой учебный сервис на FastAPI с примерами эндпоинтов для новостей и источников. Проект демонстрирует:
- работу с FastAPI и pydantic-схемами;
- подключение CORS (для http://localhost:8080 и http://127.0.0.1:8080);
- сжатие ответов через GZip middleware;
- работу с базой данных PostgreSQL для хранения новостей и источников.

## Возможности

### Эндпоинты новостей

- GET /news - Получение списка новостей с постраничным выводом и фильтрацией
- POST /news - Создание новой новости

### Эндпоинты источников

- GET /sources - Получение списка источников новостей с количеством новостей
- POST /sources - Создание нового источника новостей

### Опции фильтрации

Эндпоинт GET /news поддерживает фильтрацию по времени со следующими значениями параметра period:

- today (сегодня)
- yesterday (вчера)
- last_7_days (последние 7 дней)
- last_week (прошлая неделя)

## Требования

- Python 3.14+
- База данных PostgreSQL

## Установка и запуск (Poetry)
1. Клонируйте репозиторий и перейдите в директорию проекта.
2. Установите Poetry (если не установлен): https://python-poetry.org/docs/#installation
3. Установите зависимости через Poetry:
    - командой: `poetry install`
    - либо с помощью Makefile: `make install`
4. Инициализируйте базу данных (опционально):
    - `python init_db.py` - заполнит базу данных начальными данными
5. Запустите сервер разработки:

```bash
poetry run uvicorn main:app --reload
# или
make run
```

По умолчанию приложение будет доступно на http://127.0.0.1:8000

Интерактивная документация OpenAPI:
- Swagger UI: http://127.0.0.1:8000/docs
- ReDoc: http://127.0.0.1:8000/redoc

Примечания:

- CORS включён для http://localhost:8080 и http://127.0.0.1:8080.
- GZip включён для ответов больше 500 байт.
- Подключение к базе данных настроено для PostgreSQL (требуется запущенный экземпляр PostgreSQL)

## Разработка
- Запустите сервер с `--reload` для авто‑перезапуска.
- Изучайте/тестируйте эндпоинты через Swagger UI.

## Лицензия
Свободно используйте в учебных целях.